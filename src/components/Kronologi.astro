---
import latar1 from "../assets/img/latar-img1.png";
import latar2 from "../assets/img/latar-img2.png";
import latar3 from "../assets/img/latar-img3.png";
import img05 from "../assets/images/foto-05.jpeg";
import img06 from "../assets/images/img-06.png";
---

<!-- Kronologi -->
<section id="time_line" class="arges-heading"></section>

<!-- Kronologi -->
<section class="kronologi-scroll-desktop">
  <div class="kronologi-inner">
    <!-- Section 1: Abizar -->
    <section class="section_jeki">
      <div class="header_jeki">
        <div class="hero_wrapper_jeki cursor-container1">
          <p data-aos="zoom-in" class="ch1_jeki">ch. 1</p>
          <h1 class="year_jeki" data-aos="zoom-out">1997 – Awal 1998</h1>
          <p class="subtitle_jeki">Krisis dan Awal Gelombang Protes</p>
          <div class="custom-cursor-css custom-cursor1">CLICK ME</div>
        </div>
      </div>

      <div class="content_jeki">
        <div class="content_wrapper_jeki_spacing">
          <p class="text_jeki text-kronologi">
            Krisis moneter melanda Asia dan menghantam Indonesia.
          </p>

          <div class="images_jeki">
            <div data-aos="fade-up-right" class="img-box_jeki">
              <img src={latar1.src} alt="" />
            </div>
            <div data-aos="zoom-out" class="img-box_jeki">
              <img src={latar2.src} alt="" />
            </div>
            <div data-aos="fade-up-left" class="img-box_jeki">
              <img src={latar3.src} alt="" />
            </div>
          </div>

          <p class="text_jeki text-kronologi">
            Harga naik tajam, banyak PHK, dan mahasiswa mulai turun ke jalan
            menuntut perubahan.
          </p>
        </div>
      </div>
    </section>

    <!-- section 2: -->
    <section class="sec-2">
      <div class="top-box red-background cursor-container2">
        <!-- Button  -->
        <span>ch.2</span>
        <h1>Mei 1998</h1>
        <p>Puncak Aksi dan Tragedi</p>
        <div class="custom-cursor-css custom-cursor2">CLICK ME</div>
      </div>

      <div class="bottom-box content">
        <div class="left_alisya">
          <h1 class="arges-heading text-kronologi">PUNCAK AKSI DAN TRAGEDI</h1>
          <p class="text-kronologi">
            Demonstrasi mahasiswa dan rakyat membesar diberbagai kota. Tragedi
            trisakti pada 12 Mei menewaskan empat mahasiswa, memicu gelombang
            amarah diseluruh negeri. Aksi solidaritas merebak, gedung DPR/MPR
            dikuasai mahasiswa, dan tekanan terhadap soeharto mecapai puncaknya.
          </p>
        </div>

        <div class="right_alisya gray-background">
          <img src={img05.src} alt="" />
        </div>
      </div>
    </section>

    <!-- Section 3: Naura -->
    <section class="sec-3" id="section-3">
      <div class="top-box red-background cursor-container3">
        <span>ch. 3</span>
        <h1>21 Mei 1998</h1>
        <p>Soeharto Lengser, Era Baru Dimulai</p>
        <div class="custom-cursor-css custom-cursor3">CLICK ME</div>
      </div>

      <div class="section-p">
        <!-- <div class="section_img_wrapper">
          <img src={img06.src} alt="" />
        </div> -->
        <div class="section-main-3">
          <div class="main_3">
            <h2 class="text-kronologi">SOEHARTO LENGSER, ERA BARU DIMULAI</h2>
            <p class="description text-kronologi">
              Setelah 32 tahun berkuasa, Soeharto akhirnya mengumumkan
              pengunduran dirinya. Tangis dan sorak bercampur di jalan-jalan ibu
              kota — menandai lahirnya era baru yang disebut “Reformasi”. Rakyat
              menaruh harapan besar pada masa depan demokrasi Indonesia.
            </p>
          </div>
          <div class="wrapper-img-sec3">
            <img src={img06.src} alt="" />
          </div>
        </div>
      </div>
    </section>

    <!-- Section 4: Shofa -->
    <section class="container-2">
      <div class="top-box red-background cursor-container4">
        <span>ch. 4</span>
        <h1>PASCA 1998</h1>
        <p>AWAL REFORMASI DAN HARAPAN BARU</p>
        <div class="custom-cursor-css custom-cursor4">CLICK ME</div>
      </div>

      <div class="content_section-2">
        <div class="left-2"></div>
        <div class="right-2">
          <h2 class="text-kr">AWAL REFORMASI DAN HARAPAN BARU</h2>
          <p class="text-kronol">
            Pemerintahan baru di bawah Presiden B.J. Habibie membuka ruang
            kebebasan berpendapat, membebaskan tahanan politik, dan menyiapkan
            pemilu pertama yang demokratis. Meski jalan reformasi tidak mudah,
            semangat 1998 menjadi fondasi perubahan menuju Indonesia yang lebih
            terbuka dan adil.
          </p>
        </div>
      </div>
    </section>
  </div>
</section>

<script>
  import { fade } from "astro:transitions";
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  import { SplitText } from "gsap/SplitText";

  gsap.registerPlugin(ScrollTrigger, SplitText);

  const sections = gsap.utils.toArray(".kronologi-inner > section");
  const totalSections = sections.length;
  const sectionWidth = window.innerWidth * 2;
  const totalContentWidth = totalSections * sectionWidth;
  const totalScrollDistance = totalContentWidth - window.innerWidth;

  // text
  const texts = gsap.utils.toArray<HTMLElement>(".text-kronologi");
  const split = new SplitText(texts, { type: "words" });
  const words = split.words;

  // scroll horizontal
  const horizontalTL = gsap.to(".kronologi-inner", {
    x: -totalScrollDistance,
    ease: "none",
    scrollTrigger: {
      trigger: ".kronologi-scroll-desktop",
      pin: true,
      scrub: true,
      markers: false,
      start: "top top",
      end: () => `+=${totalScrollDistance}`,
    },
  });

  words.forEach((text) => {
    gsap.from(text, {
      opacity: 0,
      y: 50,
      stragger: 0.3,
      scrollTrigger: {
        containerAnimation: horizontalTL,
        trigger: text,
        start: "left 90%",
        end: "right 50%",
        scrub: true,
        markers: false,
      },
    });
  });
</script>

<script is:client>
  // const cursor = document.querySelector(".custom-cursor");
  const KronologiDirect = [
    {
      element: document.querySelector(".cursor-container1"),
      cursorElement: document.querySelector(".custom-cursor1"),
      pages: "/time-line/chapter01",
    },
    {
      element: document.querySelector(".cursor-container2"),
      cursorElement: document.querySelector(".custom-cursor2"),
      pages: "/time-line/chapter02",
    },
    {
      element: document.querySelector(".cursor-container3"),
      cursorElement: document.querySelector(".custom-cursor3"),
      pages: "/time-line/chapter03",
    },
    {
      element: document.querySelector(".cursor-container4"),
      cursorElement: document.querySelector(".custom-cursor4"),
      pages: "/time-line/chapter04",
    },
  ];

  KronologiDirect.forEach((value, index) => {
    value.element.addEventListener("click", () => {
      window.location.href = value.pages;
    });
    value.element.addEventListener("mouseenter", () => {
      value.cursorElement.style.display = "flex";
    });

    value.element.addEventListener("mouseleave", () => {
      value.cursorElement.style.display = "none";
    });

    value.element.addEventListener("mousemove", (e) => {
      value.cursorElement.style.left = e.clientX + "px";
      value.cursorElement.style.top = e.clientY + "px";
      value.cursorElement.style.cursor = "pointer";
    });

    console.log(value, "this element1");
    console.log(index, "this index1\n");
  });
</script>
