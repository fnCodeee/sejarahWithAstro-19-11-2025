---
import "../assets/styles/global.css";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <meta name="generator" content={Astro.generator} />
    <title>1998</title>
  </head>
  <body>
    <slot />

    <!-- <script is:client src="../scripts/main.js"></script> -->\
    <script is:client type="module">
      import { initMusicPlayer } from "/scripts/musicPlayer.js";

      // LOAD DATA
      import("/data/data.js").then(({ default: data }) => {
        const timeLineWrapper = document.getElementById("time_line");
        const buttonJelajah = document.getElementById("button_jelajah");

        buttonJelajah.addEventListener("click", () => {
          window.location.href = "https://id.wikipedia.org/wiki/Era_Reformasi";
        });

        const array_time_line = [
          "1997 - Awal 1998",
          "Mei 1998",
          "21 Mei 1998",
          "Pasca 1998",
        ];

        for (let i = 1; i <= 4; i++) {
          const image_container = document.createElement("div");
          const imageWrapper1 = document.createElement("div");
          const imageWrapper2 = document.createElement("div");
          const text = document.createElement("h1");
          const img = document.createElement("img");

          imageWrapper1.classList.add("image_container");
          image_container.classList.add("time_line_items");

          imageWrapper2.style.width = "160px";
          imageWrapper2.style.height = "157px";
          imageWrapper2.style.overflow = "hidden";

          text.innerText = array_time_line[i - 1];

          img.style.width = "100%";
          img.style.height = "100%";
          img.style.objectFit = "cover";

          img.src = `/assets/images/foto-0${i}.jpeg`;

          imageWrapper1.appendChild(imageWrapper2);
          imageWrapper2.appendChild(img);
          image_container.appendChild(text);
          image_container.appendChild(imageWrapper1);
          timeLineWrapper.appendChild(image_container);
        }

        // CARD SECTION
        const cardContainer = document.getElementById("card_container_footer");

        data.forEach((items) => {
          const imgWrapperCard = document.createElement("div");
          const cardImg = document.createElement("img");

          imgWrapperCard.classList.add("card");
          cardImg.classList.add("card-img");

          cardImg.src = items.image.src;
          imgWrapperCard.appendChild(cardImg);
          cardContainer.appendChild(imgWrapperCard);

          imgWrapperCard.addEventListener("click", () => {
            window.location.href = `/direct.html?id=${items.id}`;
          });
        });

        // MUSIC BUTTON
        initMusicPlayer("/assets/sound/belumTentu.mp3");
        const musicButton = document.getElementById("trigger-music");
        musicButton.addEventListener("click", () => {
          window.toggleMusic && window.toggleMusic();
        });
      });
    </script>

    <!-- <script is:client type="module" src="../scripts/playMusic.js"></script> -->
     <!-- <script is:client src="/scripts/NavigationTimeline.js"></script> -->
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
    height: 100%;
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  import Lenis from "lenis";

  gsap.registerPlugin(ScrollTrigger);
  document.addEventListener("DOMContentLoaded", () => {
    const lenis = new Lenis();
    lenis.on("scroll", ScrollTrigger.update);
    gsap.ticker.add((time) => {
      lenis.raf(time * 1000);
    });
    gsap.ticker.lagSmoothing(0);
  });
</script>

<script></script>
